{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Tauqir/Downloads/SocialSphere-1%202/SocialSphere-1/SocialSphere/frontend/src/app/Homepage/page.js"],"sourcesContent":["\"use client\"\r\nimport React, { useEffect, useState } from \"react\";\r\nimport LeftSideBar from \"../components/LeftSideBar\";\r\nimport RightSideBar from \"../components/RightSideBar\";\r\nimport StorySection from \"@/app/story/StorySection\";\r\nimport NewPostForm from \"../posts/NewPostForm\";\r\nimport PostCard from \"../posts/PostCard\";\r\nimport { usePostStore } from \"@/store/usePostStore\";\r\nimport toast from \"react-hot-toast\";\r\n\r\nconst HomePage = () => {\r\n  const [isPostFormOpen, setIsPostFormOpen] = useState(false);\r\n  const [likePosts,setLikePosts] = useState(new Set());\r\n  const {posts,fetchPost,handleLikePost,handleCommentPost,handleSharePost} = usePostStore();\r\n\r\n  useEffect(() =>{\r\n    fetchPost()\r\n  },[fetchPost])\r\n\r\n  useEffect(() =>{\r\n    const saveLikes = localStorage.getItem('likePosts');\r\n    if(saveLikes){\r\n      setLikePosts(new Set(JSON.parse(saveLikes)));\r\n    }\r\n  },[]);\r\n\r\n\r\n  const handleLike = async(postId)=>{\r\n    const updatedLikePost = new Set(likePosts);\r\n    if(updatedLikePost.has(postId)){\r\n      updatedLikePost.delete(postId);\r\n      toast.error('post disliked successfully')\r\n    }else {\r\n      updatedLikePost.add(postId)\r\n      toast.success('post like successfully')\r\n    }\r\n    setLikePosts(updatedLikePost);\r\n    localStorage.setItem('likePosts',JSON.stringify(Array.from(updatedLikePost)))\r\n\r\n    try {\r\n      await handleLikePost(postId);\r\n      await fetchPost();\r\n    } catch (error) {\r\n       console.error(error);\r\n       toast.error('failed to like or unlike the post')\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <div className=\"flex flex-col min-h-screen bg-background text-foreground\">\r\n      <main className=\"flex flex-1 pt-16\">\r\n        <LeftSideBar />\r\n        <div className=\"flex-1 px-4 py-6 md:ml-64 lg:mr-64 lg:max-w-3xl xl:max-w-4xl mx-auto\">\r\n          <div className=\"lg:ml-2 xl:ml-28\">\r\n            <StorySection />\r\n            <NewPostForm\r\n            \r\n              isPostFormOpen={isPostFormOpen}\r\n              setIsPostFormOpen={setIsPostFormOpen}\r\n            />\r\n            <div className=\"mt-6 space-y-6 mb-4\">\r\n              {posts.map((post) => (\r\n                <PostCard key={post._id} \r\n                  post={post}\r\n                  isLiked = {likePosts.has(post?._id)}\r\n                  onLike={() => handleLike(post?._id)}\r\n                  onComment={async(comment) => {\r\n                    await handleCommentPost(post?._id,comment.text);\r\n                    await fetchPost();\r\n                  }}\r\n                  onShare = {async() =>{\r\n                  await handleSharePost(post?._id)\r\n                  await fetchPost();\r\n                  }}\r\n                />\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"hidden lg:block lg:w-64 xl:w-80 fixed right-0 top-16 bottom-0 overflow-y-auto p-4\">\r\n          <RightSideBar />\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomePage;"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AARA;;;;;;;;;AAUA,MAAM,WAAW;;IACf,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACrD,MAAM,CAAC,WAAU,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE,IAAI;IAC9C,MAAM,EAAC,KAAK,EAAC,SAAS,EAAC,cAAc,EAAC,iBAAiB,EAAC,eAAe,EAAC,GAAG,CAAA,GAAA,+HAAA,CAAA,eAAY,AAAD;IAEtF,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;8BAAE;YACR;QACF;6BAAE;QAAC;KAAU;IAEb,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;8BAAE;YACR,MAAM,YAAY,aAAa,OAAO,CAAC;YACvC,IAAG,WAAU;gBACX,aAAa,IAAI,IAAI,KAAK,KAAK,CAAC;YAClC;QACF;6BAAE,EAAE;IAGJ,MAAM,aAAa,OAAM;QACvB,MAAM,kBAAkB,IAAI,IAAI;QAChC,IAAG,gBAAgB,GAAG,CAAC,SAAQ;YAC7B,gBAAgB,MAAM,CAAC;YACvB,0JAAA,CAAA,UAAK,CAAC,KAAK,CAAC;QACd,OAAM;YACJ,gBAAgB,GAAG,CAAC;YACpB,0JAAA,CAAA,UAAK,CAAC,OAAO,CAAC;QAChB;QACA,aAAa;QACb,aAAa,OAAO,CAAC,aAAY,KAAK,SAAS,CAAC,MAAM,IAAI,CAAC;QAE3D,IAAI;YACF,MAAM,eAAe;YACrB,MAAM;QACR,EAAE,OAAO,OAAO;YACb,QAAQ,KAAK,CAAC;YACd,0JAAA,CAAA,UAAK,CAAC,KAAK,CAAC;QACf;IACF;IAGA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAK,WAAU;;8BACd,6LAAC,2IAAA,CAAA,UAAW;;;;;8BACZ,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,uIAAA,CAAA,UAAY;;;;;0CACb,6LAAC,sIAAA,CAAA,UAAW;gCAEV,gBAAgB;gCAChB,mBAAmB;;;;;;0CAErB,6LAAC;gCAAI,WAAU;0CACZ,MAAM,GAAG,CAAC,CAAC,qBACV,6LAAC,mIAAA,CAAA,UAAQ;wCACP,MAAM;wCACN,SAAW,UAAU,GAAG,CAAC,MAAM;wCAC/B,QAAQ,IAAM,WAAW,MAAM;wCAC/B,WAAW,OAAM;4CACf,MAAM,kBAAkB,MAAM,KAAI,QAAQ,IAAI;4CAC9C,MAAM;wCACR;wCACA,SAAW;4CACX,MAAM,gBAAgB,MAAM;4CAC5B,MAAM;wCACN;uCAXa,KAAK,GAAG;;;;;;;;;;;;;;;;;;;;;8BAkB/B,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC,4IAAA,CAAA,UAAY;;;;;;;;;;;;;;;;;;;;;AAKvB;GA7EM;;QAGuE,+HAAA,CAAA,eAAY;;;KAHnF;uCA+ES"}},
    {"offset": {"line": 168, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}